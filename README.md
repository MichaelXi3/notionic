# Notionic

## é¡¹ç›®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Notion Database (CMS)                â”‚
â”‚                     â†“ (Notion API)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Next.js Application                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Data Layer (APIs)                                â”‚  â”‚
â”‚  â”‚  â€¢ getPosts() - è·å–æ–‡ç« åˆ—è¡¨                        â”‚  â”‚
â”‚  â”‚  â€¢ getRecordMap() - è·å–æ–‡ç« è¯¦æƒ…                    â”‚  â”‚
â”‚  â”‚  â€¢ /api/views/[slug] - æµè§ˆæ¬¡æ•° API                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  State Management (React Query)                   â”‚  â”‚
â”‚  â”‚  â€¢ usePostsQuery() - æ–‡ç« åˆ—è¡¨æŸ¥è¯¢                   â”‚  â”‚
â”‚  â”‚  â€¢ usePostQuery() - å•ç¯‡æ–‡ç« æŸ¥è¯¢                    â”‚  â”‚
â”‚  â”‚  â€¢ useViewCount() - æµè§ˆæ¬¡æ•°æŸ¥è¯¢                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Pages (Routes)                                   â”‚  â”‚
â”‚  â”‚  â€¢ / (index) - é¦–é¡µ/æ–‡ç« åˆ—è¡¨                        â”‚  â”‚
â”‚  â”‚  â€¢ /[slug] - æ–‡ç« è¯¦æƒ…é¡µ                             â”‚  â”‚
â”‚  â”‚  â€¢ /404 - é”™è¯¯é¡µé¢                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                             â†“                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Components                                       â”‚  â”‚
â”‚  â”‚  â€¢ Feed - æ–‡ç« åˆ—è¡¨ç»„ä»¶                              â”‚  â”‚
â”‚  â”‚  â€¢   â””â”€ PostCard - æ–‡ç« å¡ç‰‡ (+ViewCount)           â”‚  â”‚
â”‚  â”‚  â€¢ Detail - æ–‡ç« è¯¦æƒ…ç»„ä»¶                            â”‚  â”‚
â”‚  â”‚  â€¢   â””â”€ PostHeader - æ–‡ç« å¤´éƒ¨ (+ViewCount)         â”‚  â”‚
â”‚  â”‚  â€¢ ViewCount - æµè§ˆæ¬¡æ•°ç»„ä»¶                         â”‚  â”‚
â”‚  â”‚  â€¢ Category, Tag, MetaConfig                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä»£ç ç»“æ„

```
notionic/
â”œâ”€â”€ ğŸ“„ site.config.js            # ç«™ç‚¹é…ç½®ï¼ˆprofile, blog, pluginsï¼‰
â”œâ”€â”€ ğŸ“„ next.config.js            # Next.js é…ç½®
â”œâ”€â”€ ğŸ“„ package.json              # ä¾èµ–ç®¡ç†
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ apis/                # API è°ƒç”¨å±‚
â”‚   â”‚   â””â”€â”€ notion-client/      # Notion API å°è£…
â”‚   â”‚       â”œâ”€â”€ getPosts.ts     # è·å–æ‰€æœ‰æ–‡ç« 
â”‚   â”‚       â””â”€â”€ getRecordMap.ts # è·å–æ–‡ç« è¯¦æƒ…
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ pages/               # Next.js é¡µé¢è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ index.tsx           # é¦–é¡µï¼ˆæ–‡ç« åˆ—è¡¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ [slug].tsx          # åŠ¨æ€è·¯ç”±ï¼ˆæ–‡ç« è¯¦æƒ…ï¼‰
â”‚   â”‚   â”œâ”€â”€ _app.tsx            # App å…¥å£
â”‚   â”‚   â”œâ”€â”€ _document.tsx       # Document é…ç½®
â”‚   â”‚   â””â”€â”€ api/                # API Routes
â”‚   â”‚       â”œâ”€â”€ revalidate.ts   # ISR é‡æ–°éªŒè¯
â”‚   â”‚       â””â”€â”€ views/
â”‚   â”‚           â””â”€â”€ [slug].ts   # æµè§ˆæ¬¡æ•° API
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ routes/              # é¡µé¢çº§ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Feed/               # æ–‡ç« åˆ—è¡¨é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PostList/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PostCard.tsx      # (+ViewCount)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PinnedPosts.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FeedHeader/
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TagList.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Detail/             # æ–‡ç« è¯¦æƒ…é¡µ
â”‚   â”‚       â”œâ”€â”€ index.tsx
â”‚   â”‚       â””â”€â”€ PostDetail/
â”‚   â”‚           â”œâ”€â”€ PostHeader.tsx    # (+ViewCount)
â”‚   â”‚           â”œâ”€â”€ PostFooter.tsx
â”‚   â”‚           â”œâ”€â”€ CommentBox/
â”‚   â”‚           â””â”€â”€ NotionRenderer/
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ components/          # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Category/
â”‚   â”‚   â”œâ”€â”€ Tag.tsx
â”‚   â”‚   â”œâ”€â”€ Emoji.tsx
â”‚   â”‚   â”œâ”€â”€ MetaConfig/
â”‚   â”‚   â””â”€â”€ ViewCount/
â”‚   â”‚       â””â”€â”€ index.tsx       # æµè§ˆæ¬¡æ•°ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ hooks/               # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ usePostsQuery.ts    # æ–‡ç« åˆ—è¡¨æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ usePostQuery.ts     # å•æ–‡ç« æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ useCategoriesQuery.ts
â”‚   â”‚   â”œâ”€â”€ useTagsQuery.ts
â”‚   â”‚   â”œâ”€â”€ useScheme.ts        # ä¸»é¢˜åˆ‡æ¢
â”‚   â”‚   â””â”€â”€ useViewCount.ts     # â­ NEW - æµè§ˆæ¬¡æ•°æŸ¥è¯¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ types/               # TypeScript ç±»å‹
â”‚   â”‚   â””â”€â”€ index.ts            # (+views å­—æ®µ) â­
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ libs/                # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ react-query/        # React Query é…ç½®
â”‚   â”‚   â”œâ”€â”€ gtag.ts             # Google Analytics
â”‚   â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚       â””â”€â”€ notion/         # Notion ç›¸å…³å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ styles/              # æ ·å¼é…ç½®
â”‚   â”‚   â”œâ”€â”€ colors.ts
â”‚   â”‚   â”œâ”€â”€ theme.ts
â”‚   â”‚   â””â”€â”€ media.ts
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ layouts/             # å¸ƒå±€ç»„ä»¶
â”‚       â””â”€â”€ RootLayout/
â”‚           â”œâ”€â”€ Header/
â”‚           â”‚   â”œâ”€â”€ Logo.tsx
â”‚           â”‚   â”œâ”€â”€ NavBar.tsx
â”‚           â”‚   â””â”€â”€ ThemeToggle.tsx
â”‚           â””â”€â”€ ThemeProvider/
â”‚
â””â”€â”€ ğŸ“ public/                  # é™æ€èµ„æº
    â”œâ”€â”€ avatar.svg
    â”œâ”€â”€ favicon.ico
    â””â”€â”€ apple-touch-icon.png
```

## æ•°æ®æµ

### 1. æ–‡ç« æ•°æ®æµ

```
Notion Database
      â†“
[getPosts API]
      â†“
React Query (usePostsQuery)
      â†“
Feed Component â†’ PostCard
      â†“
User clicks â†’ Navigate to /[slug]
      â†“
[getRecordMap API]
      â†“
React Query (usePostQuery)
      â†“
Detail Component â†’ PostDetail â†’ NotionRenderer
```

### 2. æµè§ˆæ¬¡æ•°æ•°æ®æµ

```
User visits /[slug]
      â†“
PostHeader mounts
      â†“
useViewCount Hook
      â†“ (1 second delay)
POST /api/views/[slug]  (increment)
      â†“
Views count stored (Memory/Redis)
      â†“
GET /api/views/[slug]   (fetch)
      â†“
React Query cache (5 min)
      â†“
ViewCount Component
      â†“
Display: 123
```

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Next.js 13** - React æ¡†æ¶ï¼ˆSSG/ISRï¼‰
- **React 18** - UI åº“
- **TypeScript** - ç±»å‹ç³»ç»Ÿ

### æ•°æ®ç®¡ç†
- **Notion API** - å†…å®¹ç®¡ç†ï¼ˆCMSï¼‰
- **React Query** - çŠ¶æ€ç®¡ç†å’Œç¼“å­˜
- **notion-client** - Notion API å°è£…åº“

### æ ·å¼æ–¹æ¡ˆ
- **Emotion** - CSS-in-JS
- **Radix Colors** - é¢œè‰²ç³»ç»Ÿ

### å…¶ä»–å·¥å…·
- **react-notion-x** - Notion å†…å®¹æ¸²æŸ“
- **Mermaid** - å›¾è¡¨æ”¯æŒ
- **Prism.js** - ä»£ç é«˜äº®
- **Vercel Analytics** - åˆ†æç»Ÿè®¡

## é¡¹ç›®åŠŸèƒ½

-  åŸºäº Notion çš„å†…å®¹ç®¡ç†
-  æ–‡ç« åˆ†ç±»å’Œæ ‡ç­¾
-  å…¨æ–‡æœç´¢
-  è¯„è®ºç³»ç»Ÿï¼ˆUtterances/Cusdisï¼‰
-  Google Analytics é›†æˆ
-  æš—è‰²/äº®è‰²ä¸»é¢˜åˆ‡æ¢
-  SEO ä¼˜åŒ–ï¼ˆMeta tags, Sitemapï¼‰
-  å“åº”å¼è®¾è®¡
-  ISRï¼ˆå¢é‡é™æ€ç”Ÿæˆï¼‰
-  æµè§ˆæ¬¡æ•°ç»Ÿè®¡
-  å®æ—¶è®¡æ•° API
-  ç¼“å­˜ä¼˜åŒ–ï¼ˆReact Queryï¼‰
-  å¯é…ç½®å¼€å…³

## æ€§èƒ½ä¼˜åŒ–

### æ¸²æŸ“ç­–ç•¥
- **SSG** (Static Site Generation) - é¦–æ¬¡æ„å»ºç”Ÿæˆé™æ€é¡µé¢
- **ISR** (Incremental Static Regeneration) - æŒ‰éœ€é‡æ–°éªŒè¯
  - é»˜è®¤é‡æ–°éªŒè¯æ—¶é—´: 21600 * 7 ç§’ (â‰ˆ 7 å¤©)
  - API ç«¯ç‚¹: `/api/revalidate`

### ç¼“å­˜ç­–ç•¥
- **React Query**
  - æ–‡ç« æ•°æ®: é»˜è®¤ç¼“å­˜
  - æµè§ˆæ¬¡æ•°: 5 åˆ†é’Ÿ staleTime

### å›¾ç‰‡ä¼˜åŒ–
- **Next.js Image** - è‡ªåŠ¨ä¼˜åŒ–ã€æ‡’åŠ è½½

## å®‰å…¨æ€§

### ç¯å¢ƒå˜é‡
```env
NOTION_PAGE_ID              # Notion æ•°æ®åº“ ID
TOKEN_FOR_REVALIDATE        # ISR é‡æ–°éªŒè¯ä»¤ç‰Œ
NEXT_PUBLIC_GOOGLE_*        # Google æœåŠ¡é…ç½®
NEXT_PUBLIC_UTTERANCES_REPO # è¯„è®ºç³»ç»Ÿé…ç½®
```

### API å®‰å…¨
-  è¾“å…¥éªŒè¯
-  é”™è¯¯å¤„ç†
-  Rate limitingï¼ˆToDoï¼‰

## ä¸»é¢˜ç³»ç»Ÿ
```javascript
// site.config.js
blog: {
  scheme: "system" // 'light' | 'dark' | 'system'
}
```

## éƒ¨ç½²

### æ¨èå¹³å°
- **Vercel**
  - è‡ªåŠ¨éƒ¨ç½²
  - è¾¹ç¼˜ç½‘ç»œ
  - ç¯å¢ƒå˜é‡ç®¡ç†

### éƒ¨ç½²æ­¥éª¤
1. Fork é¡¹ç›®åˆ° GitHub
2. è¿æ¥åˆ° Vercel
3. é…ç½®ç¯å¢ƒå˜é‡
4. è‡ªåŠ¨éƒ¨ç½²

---

**é¡¹ç›®åœ°å€**: [notionic](https://github.com/MichaelXi3/notionic)  
**ä½œè€…**: Void (Michael Xi)  
**License**: MIT